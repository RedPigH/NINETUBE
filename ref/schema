-- TABLE SPACE
CREATE TABLESPACE NINETUBE
	DATAFILE 'D:\data\NINETUBE\NINETUBE.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TABLESPACE NINETUBEINDEX
	DATAFILE 'D:\data\NINETUBE\NINETUBEIndex.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TEMPORARY TABLESPACE NINETUBETEMP
TEMPFILE 'D:\data\NINETUBE\NINETUBETemp.dbf' size 10M
AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;

-- NVIDEO_R TABLE SPACE
CREATE TABLESPACE NVIDEO_INDEX
	DATAFILE 'D:\data\NINETUBE\NVIDEO_INDEX.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_0
	DATAFILE 'D:\data\NINETUBE\NVIDEO_0.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_1
	DATAFILE 'D:\data\NINETUBE\NVIDEO_1.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_2
	DATAFILE 'D:\data\NINETUBE\NVIDEO_2.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_3
	DATAFILE 'D:\data\NINETUBE\NVIDEO_3.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_4
	DATAFILE 'D:\data\NINETUBE\NVIDEO_4.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_5
	DATAFILE 'D:\data\NINETUBE\NVIDEO_5.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_6
	DATAFILE 'D:\data\NINETUBE\NVIDEO_6.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_7
	DATAFILE 'D:\data\NINETUBE\NVIDEO_7.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_8
	DATAFILE 'D:\data\NINETUBE\NVIDEO_8.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_9
	DATAFILE 'D:\data\NINETUBE\NVIDEO_9.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

-- ORACLE 사용자 생성
CREATE USER NINETUBE IDENTIFIED BY NINETUBE
	DEFAULT TABLESPACE "NINETUBE"
	TEMPORARY TABLESPACE "NINETUBETEMP"
	QUOTA UNLIMITED ON "NINETUBE"
	QUOTA UNLIMITED ON "NINETUBEINDEX"
	PROFILE "DEFAULT";

GRANT "CONNECT" TO NINETUBE;
GRANT "RESOURCE" TO NINETUBE;
GRANT CREATE VIEW TO NINETUBE;

-- 테이블 생성

CREATE TABLE NUSER
(
    OID VARCHAR2(11) NOT NULL,
    ACCUNT VARCHAR2(50) NOT NULL,
    NAME VARCHAR2(50),
    PASSWORD VARCHAR2(50),
    DELSTATUS NUMBER DEFAULT 0, -- 0은 기본 1은 삭제
    GENDER NUMBER,
    BIRTH VARCHAR2(8),
    LOGINTYPE CHAR(1) DEFAULT 'B', -- B 기본, G 구글, N 네이버
    CREATEDATE DATE,
    DELDATE  DATE,
    ACCESSGRADE NUMBER DEFAULT 0, -- 0 일반 사용자, 1 관리자
    EMAIL VARCHAR2(250)
)
TABLESPACE NINETUBE;

CREATE TABLE NVIDEO_V
(
    OID VARCHAR2(11) NOT NULL,
    VFILENAME VARCHAR2(100),
    fileSize NUMBER NOT NULL,
    CREATOR VARCHAR(50) NOT NULL,
    CREATEDAT DATE NOT NULL,
    VIEWCNT NUMBER DEFAULT 0,
    GOODCNT NUMBER DEFAULT 0,
    BADCNT NUMBER DEFAULT 0,
    RUNNIGTIME VARCHAR2(11) NOT NULL,
    DESCRIPTION VARCHAR2(500),
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE NOT NULL,
    UPDATEDATE DATE DEFAULT NULL,
    PARTITION char(1) not null,

    CONSTRAINT PK_NVIDEO_V PRIMARY KEY (OID) USING INDEX TABLESPACE "NVIDEO_INDEX"
)
PARTITION BY LIST (PARTITION)
       (PARTITION NVIDEO_0 VALUES('0') TABLESPACE NVIDEO_0,
        PARTITION NVIDEO_1 VALUES('1') TABLESPACE NVIDEO_1,
        PARTITION NVIDEO_2 VALUES('2') TABLESPACE NVIDEO_2,
        PARTITION NVIDEO_3 VALUES('3') TABLESPACE NVIDEO_3,
        PARTITION NVIDEO_4 VALUES('4') TABLESPACE NVIDEO_4,
        PARTITION NVIDEO_5 VALUES('5') TABLESPACE NVIDEO_5,
        PARTITION NVIDEO_6 VALUES('6') TABLESPACE NVIDEO_6,
        PARTITION NVIDEO_7 VALUES('7') TABLESPACE NVIDEO_7,
        PARTITION NVIDEO_8 VALUES('8') TABLESPACE NVIDEO_8,
        PARTITION NVIDEO_9 VALUES('9') TABLESPACE NVIDEO_9);

CREATE TABLE NVIDEO_R
(
    OID VARCHAR2(11),
    DIR VARCHAR2(128) NOT NULL,
    fileSize NUMBER NOT NULL,
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE DEFAULT NULL,
    PARTITION char(1) NOT NULL,

    CONSTRAINT PK_NVIDEO_R PRIMARY KEY (OID) USING INDEX TABLESPACE "NVIDEO_INDEX"
)
PARTITION BY LIST (PARTITION)
       (PARTITION NVIDEO_0 VALUES('0') TABLESPACE NVIDEO_0,
        PARTITION NVIDEO_1 VALUES('1') TABLESPACE NVIDEO_1,
        PARTITION NVIDEO_2 VALUES('2') TABLESPACE NVIDEO_2,
        PARTITION NVIDEO_3 VALUES('3') TABLESPACE NVIDEO_3,
        PARTITION NVIDEO_4 VALUES('4') TABLESPACE NVIDEO_4,
        PARTITION NVIDEO_5 VALUES('5') TABLESPACE NVIDEO_5,
        PARTITION NVIDEO_6 VALUES('6') TABLESPACE NVIDEO_6,
        PARTITION NVIDEO_7 VALUES('7') TABLESPACE NVIDEO_7,
        PARTITION NVIDEO_8 VALUES('8') TABLESPACE NVIDEO_8,
        PARTITION NVIDEO_9 VALUES('9') TABLESPACE NVIDEO_9);
-- SELECT * FROM NVIDEO_R PARTITION (NVIDEO_R_0) WHERE oid = '';

CREATE TABLE NCOMMENT
(
	OID VARCHAR2(11) NOT NULL,
	VIDEOOID NUMBER NOT NULL,
	USEROID NUMBER NOT NULL,
	CONTENT VARCHAR2(2000),
	GOODCNT NUMBER DEFAULT 0,
	BADCNT NUMBER DEFAULT 0,
	CREATEDATE DATE,
	UPDATEDATE DATE DEFAULT NULL,
	DELSTATUS NUMBER DEFAULT 0,
	DELDATE DATE DEFAULT NULL
)
TABLESPACE NINETUBE;

CREATE TABLE NPLAYLIST
(
	OID VARCHAR2(11) NOT NULL,
	USEROID NUMBER NOT NULL,
	NAME VARCHAR2(100) NOT NULL,
	CREATEDATE DATE,
	VIDEOLIST ????
	VIDEONUM ????
)
TABLESPACE NINETUBE;

CREATE TABLE NREPORT
(
	OID VARCHAR2(11) NOT NULL,
	USEROID NUMBER NOT NULL,
	TARGETOID NUMBER NOT NULL,
	TARGETTYPE CHAR(1) NOT NULL,
	REPORTDATE DATE
)
TABLESPACE NINETUBE;