-- TABLE SPACE
CREATE TABLESPACE NINETUBE
	DATAFILE 'D:\data\NINETUBE\NINETUBE.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TABLESPACE NINETUBEINDEX
	DATAFILE 'D:\data\NINETUBE\NINETUBEIndex.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TEMPORARY TABLESPACE NINETUBETEMP
TEMPFILE 'D:\data\NINETUBE\NINETUBETemp.dbf' size 10M
AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;

-- ORACLE 사용자 생성
CREATE USER NINETUBE IDENTIFIED BY NINETUBE
	DEFAULT TABLESPACE "NINETUBE"
	TEMPORARY TABLESPACE "NINETUBETEMP"
	QUOTA UNLIMITED ON "NINETUBE"
	QUOTA UNLIMITED ON "NINETUBEINDEX"
	PROFILE "DEFAULT";

GRANT "CONNECT" TO NINETUBE;
GRANT "RESOURCE" TO NINETUBE;
GRANT CREATE VIEW TO NINETUBE;

-- 테이블 생성

CREATE TABLE NUSER
(
    OID VARCHAR2(11) NOT NULL,
    ACCUNT VARCHAR2(50) NOT NULL,
    NAME VARCHAR2(50),
    PASSWORD VARCHAR2(50),
    DELSTATUS NUMBER DEFAULT 0, -- 0은 기본 1은 삭제
    GENDER NUMBER,
    BIRTH VARCHAR2(8),
    LOGINTYPE CHAR(1) DEFAULT 'B', -- B 기본, G 구글, N 네이버
    CREATEDATE DATE,
    DELDATE  DATE,
    ACCESSGRADE NUMBER DEFAULT 0, -- 0 일반 사용자, 1 관리자
    EMAIL VARCHAR2(250)
)
TABLESPACE NINETUBE;

CREATE TABLE NVIDEO_V
(
    OID VARCHAR2(11) NOT NULL,
    VFILENAME VARCHAR2(100),
    SIZE NUMBER NOT NULL,
    CREATOR VARCHAR(50) NOT NULL,
    CREATEDAT DATE NOT NULL,
    VIEWCNT NUMBER DEFAULT 0,
    GOODCNT NUMBER DEFAULT 0,
    BADCNT NUMBER DEFAULT 0,
    RUNNIGTIME VARCHAR2(11) NOT NULL,
    DESCRIPTION VARCHAR2(500),
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE NOT NULL,
    UPDATEDATE DATE DEFAULT NULL,
	PARTITION CHAR(2) NOT NULL
)
TABLESPACE NINETUBE;

CREATE TABLE NVIDEO_R
(
    OID VARCHAR2(11) NOT NULL,
    DIR VARCHAR2(128) NOT NULL,
    SIZE NUMBER NOT NULL,
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE DEFAULT NULL,
	PARTITION CHAR(2) NOT NULL
)
TABLESPACE NINETUBE;

CREATE TABLE NCOMMENT
(
	OID VARCHAR2(11) NOT NULL,
	VIDEOOID NUMBER NOT NULL,
	USEROID NUMBER NOT NULL,
	CONTENT VARCHAR2(2000),
	GOODCNT NUMBER DEFAULT 0,
	BADCNT NUMBER DEFAULT 0,
	CREATEDATE DATE,
	UPDATEDATE DATE DEFAULT NULL,
	DELSTATUS NUMBER DEFAULT 0,
	DELDATE DATE DEFAULT NULL
)
TABLESPACE NINETUBE;

CREATE TABLE NPLAYLIST
(
	OID VARCHAR2(11) NOT NULL,
	USEROID NUMBER NOT NULL,
	NAME VARCHAR2(100) NOT NULL,
	CREATEDATE DATE,
	VIDEOLIST ????
	VIDEONUM ????
)
TABLESPACE NINETUBE;

CREATE TABLE NREPORT
(
	OID VARCHAR2(11) NOT NULL,
	USEROID NUMBER NOT NULL,
	TARGETOID NUMBER NOT NULL,
	TARGETTYPE CHAR(1) NOT NULL,
	REPORTDATE DATE
)
TABLESPACE NINETUBE;